# 🚀 NFT Market V2 测试指南

## 📋 部署状态
- ✅ **NFT合约**: `0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512`
- ✅ **市场合约**: `0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9` (V2)
- ✅ **前端服务**: http://localhost:3000
- ✅ **Anvil节点**: http://127.0.0.1:8545

## 🧪 测试步骤

### 1. 基础功能测试
1. **访问首页**: http://localhost:3000
   - 确认页面标题显示 "NFT Market V2"
   - 确认导航栏显示 "Signature List" 链接

2. **连接钱包**
   - 点击 "Connect Wallet" 按钮
   - 选择 MetaMask 或 WalletConnect
   - 确认连接到本地网络 (Chain ID: 31337)

### 2. NFT铸造测试
1. **访问铸造页面**: http://localhost:3000/list
2. **铸造NFT**:
   - 点击 "Mint NFT" 按钮
   - 确认交易成功
   - 验证NFT出现在 "Your NFTs" 列表中

### 3. 传统上架测试
1. **上架NFT**:
   - 选择要上架的NFT
   - 设置价格 (0.001 - 100 ETH)
   - 点击 "List NFT" 按钮
   - 确认交易成功

### 4. V2新功能测试 - 离线签名上架

#### 4.1 访问签名上架页面
- 点击导航栏的 "Signature List" 链接
- 或直接访问: http://localhost:3000/signature-list

#### 4.2 使用自动生成功能
1. **选择NFT合约**: 确认显示 `0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512`
2. **输入Token ID**: 输入您拥有的NFT Token ID
3. **设置价格**: 输入价格 (wei单位)
4. **自动生成Nonce**:
   - 点击 "Generate" 按钮
   - 系统会自动生成基于时间戳的智能nonce
5. **自动生成Deadline**:
   - 点击 "+24h" 按钮
   - 系统会自动设置24小时后的过期时间

#### 4.3 生成签名
1. **点击 "Generate Signature" 按钮**
2. **钱包会弹出签名请求**
3. **确认签名**
4. **复制生成的签名数据**

#### 4.4 提交签名上架
1. **粘贴签名到 "Signature" 字段**
2. **点击 "Submit Signature Listing" 按钮**
3. **确认交易成功**

### 5. 验证功能
1. **检查市场统计**: 确认总上架数量增加
2. **检查NFT状态**: 确认NFT显示为已上架
3. **检查签名使用状态**: 确认签名已被标记为已使用

## 🔍 预期结果

### 成功指标
- ✅ 页面正确显示V2版本信息
- ✅ 自动生成nonce和deadline功能正常
- ✅ 签名生成和验证成功
- ✅ 离线签名上架功能正常
- ✅ 所有V1功能保持正常

### 错误排查
如果遇到问题，请检查：
1. **网络连接**: 确认Anvil节点运行正常
2. **钱包连接**: 确认钱包已连接到本地网络
3. **合约地址**: 确认环境变量配置正确
4. **Gas费用**: 确认账户有足够ETH支付gas

## 📝 测试记录

### 测试结果
- [ ] 基础功能测试
- [ ] NFT铸造测试  
- [ ] 传统上架测试
- [ ] 自动生成nonce测试
- [ ] 自动生成deadline测试
- [ ] 签名生成测试
- [ ] 离线签名上架测试
- [ ] 功能验证测试

### 发现的问题
- [ ] 无问题
- [ ] 问题1: ________________
- [ ] 问题2: ________________

## 🎯 下一步
测试完成后，您可以：
1. 继续开发更多V2功能
2. 优化用户体验
3. 添加更多测试用例
4. 准备生产环境部署

---
**测试时间**: $(date)
**测试环境**: 本地开发环境
**合约版本**: V2.0.0
